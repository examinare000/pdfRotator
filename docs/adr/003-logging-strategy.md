# ADR-003: ログ出力をファイルへ集約する方針

## ステータス
採用済み（2025-12-23）

## 背景
- 問題発生時の調査を容易にするため、コンソール出力ではなく永続ログが必要。
- サーバ/フロント双方のエラーを同一のログ基盤へ集約したい。

## 決定
- サーバログは `logs/` 配下のファイルへ出力する。
  - `logs/server.log`（info 以上）
  - `logs/server-error.log`（error）
- フロントのエラーは `/api/logs` へ送信し、サーバ側でファイルに記録する。
- 重要情報（PII/機密）をログへ出力しない。

## 根拠
- 調査時にログファイルが残ることでトレーサビリティが向上する。
- クライアント起因の不具合もサーバログに統合できる。

## トレードオフ
- ログの保存容量が増えるため、将来的にローテーション設定が必要。

## 影響範囲
- バックエンド: winston のファイル出力設定と `/api/logs` 受信。
- フロントエンド: エラーハンドリング時にログ送信を追加。
